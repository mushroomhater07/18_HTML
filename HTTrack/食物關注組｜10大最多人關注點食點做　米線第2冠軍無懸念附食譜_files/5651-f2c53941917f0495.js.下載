"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5651],{85651:function(e,n,t){t.d(n,{Z:function(){return I}});var o=t(13657),r=t.n(o),l=t(4730),a=t(59499),i=t(67294),c=t(7996);let u;!function(e){e.SESSION_ID="sessionID",e.VIDEO_ID="videoID",e.TS="ts",e.VERSION="version",e.URL="url",e.VIDEO_TIME="videoTime",e.VIDEO_FROM_TIME="videoFromTime",e.FROM_TIME="fromTime",e.VIDEO_TO_TIME="videoToTime",e.TO_TIME="toTime",e.AD_ID="adID",e.AD_TYPE="adType"}(u||(u={}));var d=t(10396),s=t(31063),p=t(83372),y=t(56770);const f=["nonInteraction"];function v(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function g(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?v(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):v(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}const _=(e,n)=>{const{labelAppend:t}=null!==n&&void 0!==n?n:{},{nonInteraction:o}=(0,i.useContext)(y.Z),r=(0,i.useRef)(o);r.current=o;const a=(0,i.useCallback)(((e,n,o)=>{(async e=>{const{category:n=s.GJ.PLAYER_V3,action:t,label:o}=e;try{const e=await(0,d.u)(),{nonInteraction:r}=o,a=(0,l.Z)(o,f);e.fire({GA:!0,Piwik:!0},{category:n,action:t,label:(0,p.p4)(a),nonInteraction:r})}catch(r){c.Z.error(r)}})({category:e,action:n,label:g(g(g({},JSON.parse(o)),t),{},{nonInteraction:r.current})})}),[e,r]);return a};var O=t(7404),w=t(85893);const b=["innerRef","trackingLabelAppend","onInit","onReady","onCanPlay","onPlaying","onAdEnd","onPlay","onPause","onEnded","onResize","onEvent","onFullscreenChange","autoplay","initialMuted","uiOptions"];function h(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function m(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?h(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):h(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}const P=(...e)=>e.every((e=>"string"===typeof e))?console.info(new Array(e.length).fill("%c%s").join(""),...e.flatMap(((e,n)=>[n%2?"color: deepskyblue;":"color: cyan;",e]))):console.info(...e),E=e=>{const{playerElem:n}=e,t=null===n||void 0===n?void 0:n.player,o=null===t||void 0===t?void 0:t.player,r=(null===o||void 0===o?void 0:o.id())||(0,O.Z)(),l=new Set;if(n){const e=(window.__HK01_DEBUG_DATA__=window.__HK01_DEBUG_DATA__||{},window.__HK01_DEBUG_DATA__);o&&["abort","beforepluginsetup","canplay","canplaythrough","componentresize","controlsdisabled","controlsenabled","dispose","durationchange","emptied","ended","enterFullWindow","enterpictureinpicture","error","exitFullWindow","firstplay","fullscreenchange","languagechange","leavepictureinpicture","loadeddata","loadeddata","loadedmetadata","loadedmetadata","loadstart","pause","play","playerresize","playing","pluginsetup","posterchange","progress","ratechange","ready","resize","seeked","seeking","sourceset","stalled","suspend","tap","textdata","texttrackchange","useractive","userinactive","usingcustomcontrols","usingnativecontrols","volumechange","volumechange","waiting","AdEnd","AdStart","AspectRatioChange"].forEach((e=>{o.on(e,(n=>{l.add({eventType:e,event:n}),console.group(`debug::player::${r}::event`),P(`[eventType: ${e}]`),P(n),console.groupEnd()}))})),(e=>{window.__HK01_DEBUG_DATA__=window.__HK01_DEBUG_DATA__||{},Object.assign(window.__HK01_DEBUG_DATA__,e)})({videoPlayer:m(m({},e.videoPlayer||{}),{},{[r]:n}),videoPlayerEvents:m(m({},e.videoPlayerEvents||{}),{},{[r]:l})}),console.group(`debug::player::${r}`),P(`[playerElem: ${r}]`),P(n),console.groupEnd()}},D=(0,i.memo)((e=>{const{innerRef:n,trackingLabelAppend:t,onInit:o,onReady:a,onCanPlay:c,onPlaying:u,onAdEnd:d,onPlay:s,onPause:p,onEnded:y,onResize:f,onEvent:v,onFullscreenChange:g,autoplay:O,initialMuted:h,uiOptions:P}=e,D=(0,l.Z)(e,b),{0:j,1:I}=(0,i.useState)(null),A=(0,i.useRef)(null),T=null!==n&&void 0!==n?n:A,R=(0,i.useRef)({onInit:o,onReady:a,onAdEnd:d,onCanPlay:c,onPlaying:u,onPlay:s,onPause:p,onEnded:y,onResize:f,onFullscreenChange:g});R.current={onInit:o,onReady:a,onAdEnd:d,onCanPlay:c,onPlaying:u,onPlay:s,onPause:p,onEnded:y,onResize:f,onFullscreenChange:g};const S=_(T,{labelAppend:t}),k=(0,i.useCallback)(((e,n,t)=>{S(e,n,t),v&&v(e,n,t)}),[S,v]);(0,i.useEffect)((()=>{(async()=>{const{System:e}=window;e.has("app:react")||e.set("app:react",i);const n=!window.define&&window.systemjsDefine;n&&(window.define=window.systemjsDefine);const{default:t}=await e.import("hk01-react-video-player");n&&delete window.define,I((()=>t))})()}),[]),(0,i.useEffect)((()=>{const e=T.current;if(!e)return;const n=R.current.onPlay?n=>R.current.onPlay(n,e):void 0,t=R.current.onPause?n=>R.current.onPause(n,e):void 0,o=R.current.onEnded?n=>R.current.onEnded(n,e):void 0;try{(async()=>{var r,l,a;await e.createPromise;const i=e.player,c=null===i||void 0===i?void 0:i.player;null===(r=(l=R.current).onInit)||void 0===r||r.call(l,e),["true","vdoplayer"].includes(null===(a=new URL(window.location.href).searchParams)||void 0===a?void 0:a.get("01debug"))&&E({playerElem:e}),null===c||void 0===c||c.one("ready",(n=>{var t,o;null===(t=(o=R.current).onReady)||void 0===t||t.call(o,n,e)})),null===c||void 0===c||c.one("canplay",(n=>{var t,o;null===(t=(o=R.current).onCanPlay)||void 0===t||t.call(o,n,e)})),null===c||void 0===c||c.on("playing",(n=>{var t,o;null===(t=(o=R.current).onPlaying)||void 0===t||t.call(o,n,e)})),null===c||void 0===c||c.on("AdEnd",(n=>{var t,o;null===(t=(o=R.current).onAdEnd)||void 0===t||t.call(o,n,e)})),n&&(null===c||void 0===c||c.on("play",n)),t&&(null===c||void 0===c||c.on("pause",t)),o&&(null===c||void 0===c||c.on("ended",o)),null===c||void 0===c||c.on("fullscreenchange",(n=>{var t,o;return null===(t=(o=R.current).onFullscreenChange)||void 0===t?void 0:t.call(o,n,e)})),null===c||void 0===c||c.on("playerresize",(n=>{var t,o;null===(t=(o=R.current).onResize)||void 0===t||t.call(o,n,e)}))})()}catch(r){console.log("Video player initiate error",r)}return()=>{var r,l,a,i,c,u,d,s,p;n&&(null===(r=e.player)||void 0===r||null===(l=r.player)||void 0===l||null===(a=l.off)||void 0===a||a.call(l,"play",n));t&&(null===(i=e.player)||void 0===i||null===(c=i.player)||void 0===c||null===(u=c.off)||void 0===u||u.call(c,"pause",t));o&&(null===(d=e.player)||void 0===d||null===(s=d.player)||void 0===s||null===(p=s.off)||void 0===p||p.call(s,"ended",o))}}),[j,T]);const C=(0,i.useMemo)((()=>m(m(m({},!r()(O)&&{autoplay:O}),!r()(h)&&{muted:h}),{},{resizeManager:!0})),[O,h]);return j?(0,w.jsx)(j,m(m({onEvent:k,uiOptions:P,vjsOptions:C},D),{},{ref:T,adDescriptionUrl:window.location.href})):null}));D.displayName="DynamicVideoPlayer";const j=(0,i.forwardRef)(((e,n)=>(0,w.jsx)(D,m({innerRef:n},e))));j.displayName="DynamicVideoPlayerForwardRef";var I=j},83372:function(e,n,t){t.d(n,{D$:function(){return O},_l:function(){return w},p4:function(){return P},qx:function(){return _},ZL:function(){return m},H:function(){return h},qF:function(){return b}});var o=t(13657),r=t.n(o),l=t(79821),a=t.n(l),i=t(59499),c=t(54782),u=t.n(c),d=t(11163),s=t(63716),p=t(98908);var y=t(63215);function f(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function v(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?f(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}const g=t(84564),_=()=>{const e=document.getElementById("articleTitle"),n=(0,y._)();return{1:u()(null,["dataset","author"],e),5:u()(null,["router","query","articleId"],d.default),3:u()(null,["dataset","category"],e),8:window[s.Z.ANONYMOUS_ID],6:n?"Member":"Anonymous",7:n,11:(0,p.WT)()}},O=()=>{const e=document.getElementById("articleTitle");return{article_id:u()(null,["router","query","articleId"],d.default),category:u()(null,["dataset","category"],e),type:u()(null,["dataset","type"],e)}},w=()=>{const e=document.querySelector('[data-id="article-recent-article-module"]');return v(v({},O()),{},{module_shown:(n=e,r()(null===n||void 0===n?void 0:n.offsetParent)?[]:["recent_article"])});var n},b=e=>{const n=g(e);if(!n.hash.startsWith("#media_id=")&&!n.hash.startsWith("#ad="))return e;return e.replace(n.query,"").replace("#media_id=","/media_id=").replace("#ad=","/ad=")+n.query},h=e=>{const n=u()(null,["hash_type"],e),t=u()(null,["pid"],e),o={gid:u()(null,["gid"],e),pid:t};return n&&(o[n]=u()(null,["hash_id"],e)),a()(o,e)},m=(e={})=>{const{isFeatured:n,isSponsored:t,isRelatedArticle:o,canonicalUrl:l,link:a}=e,i=r()(n)?null:Boolean(n),c=r()(t)?null:Boolean(t),d=o?{from_article_id:u()(null,["from_article_id"],e),feed_source:u()(null,["source"],e),item_pos:u()(null,["item_pos"],e),list_length:u()(null,["list_length"],e)}:{};return v({article_id:u()(null,["articleId"],e),category:u()(null,["mainCategory"],e),highlight:i,focus:c,target_url:l||a||null},d)},P=e=>{const n={account_id:(0,y._)(),ts:Date.now(),bucket_id:(0,p.WT)(),anonymous_id:window[s.Z.ANONYMOUS_ID],session_id:window[s.Z.SESSION_ID]};return JSON.stringify(Object.assign({},n,e))}},56770:function(e,n,t){const o=(0,t(67294).createContext)({nonInteraction:!0});n.Z=o}}]);