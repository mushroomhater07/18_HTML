_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[32],{"U/ix":function(e,t,n){"use strict";n.r(t);var r,i,o=n("o0o1"),c=n.n(o),a=n("HaE+"),s=n("wx14"),u=n("rePB"),O=n("di3x"),_=n("q1tI"),l=n.n(_),p=n("9kay"),S=n("tEaz"),b=n("TlBc"),f=n("6gIc"),d=n("NUc0"),P=n("21WQ"),g=n("gKCu"),j=n("6+LV"),w=n("d86I"),E=n("vOnD"),T=l.a.createElement;function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){e.PUA_REPOST_LIST_ON_SHOW="PUA_REPOST_LIST_ON_SHOW",e.PUA_REPOST_LIST_ON_CLOSE="PUA_REPOST_LIST_ON_CLOSE",e.PUA_REPOST_LIST_ON_LOAD_SUCCESS="PUA_REPOST_LIST_ON_LOAD_SUCCESS",e.PUA_REPOST_LIST_ON_LOAD_FAIL="PUA_REPOST_LIST_ON_LOAD_FAIL"}(r||(r={})),function(e){e.PUA_REPOST_LIST_SHOW="PUA_REPOST_LIST_SHOW"}(i||(i={}));var m=!1,v=function(e){m&&window.parent.postMessage(e,"*")},I=function(){var e=Object(p.c)().t,t=Object(_.useRef)(!0),n=Object(_.useState)({url:"",pageSize:30}),o=n[0],c=o.url,a=o.pageSize,u=n[1],l=Object(_.useState)({isFetching:!1,reposts:[]}),P=l[0],E=l[1],h=Object(_.useState)(!1),I=h[0],C=h[1],R=P.isFetching,U=P.reposts,N=P.pagination,k=Object(g.d)().fetchExternalReposts,x=N||{hasMore:!1,nextPageToken:null},F=x.hasMore,D=x.nextPageToken,H=Object(_.useCallback)((function(){C(!1),v({event:r.PUA_REPOST_LIST_ON_CLOSE})}),[]),W=Object(_.useCallback)((function(e,t){E({isFetching:!1,reposts:O.a(U,e),pagination:t}),v({event:r.PUA_REPOST_LIST_ON_LOAD_SUCCESS})}),[U]),z=Object(_.useCallback)((function(){E(L(L({},P),{},{isFetching:!1})),v({event:r.PUA_REPOST_LIST_ON_LOAD_FAIL})}),[P]),B=Object(_.useCallback)((function(){R||(E(L(L({},P),{},{isFetching:!0})),setTimeout((function(){return k({url:c,pageToken:D||void 0,pageSize:a,onSuccess:W,onFail:z})}),0))}),[k,z,W,R,D,a,P,c]),M=Object(_.useCallback)((function(){0===U.length&&!R&&t.current&&(t.current=!1,E(L(L({},P),{},{isFetching:!0})),k({url:c,pageSize:a,onSuccess:W,onFail:z})),v({event:r.PUA_REPOST_LIST_ON_SHOW})}),[c,k,z,W,R,a,U.length,P]),q=Object(_.useCallback)((function(e){return T(y,{key:e._id},T(f.a,Object(s.a)({story:e,hidePgcRepost:!0,hideMore:!0,hideSocialButtons:!0},e.type===j.i.REPOST?{hideContent:!0,hideSocialReactionSummary:!0,showOriginalStory:!1}:{})))}),[]),J=Object(_.useCallback)((function(e){return T(A,null,e)}),[]),V=Object(_.useCallback)((function(e){if("object"===typeof e.data&&"string"===typeof e.data.event)switch(e.data.event){case i.PUA_REPOST_LIST_SHOW:C(!0)}}),[]);return Object(_.useEffect)((function(){m=window.parent!==window}),[]),Object(_.useEffect)((function(){var e=Object(w.a)(["url","pageSize"]);u({url:e.url||"",pageSize:Number(e.pageSize||30)})}),[]),Object(_.useEffect)((function(){return window.addEventListener("message",V),function(){window.removeEventListener("message",V)}}),[V]),"undefined"===typeof document?null:T(b.a,{mobileBoxType:S.a.FullScreenBox,title:e("components.reposter_list_modal.title"),isVisible:I,onClose:H,onShow:M,renderBody:J,data:{isFetching:R,items:U,onLoadMore:B,hasMore:F,renderItem:q,skeleton:T(y,null,T(d.a,null))}})};I.getInitialProps=Object(a.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}),e)}))),t.default=I;var y=E.default.div.withConfig({displayName:"repostList__StoryCardWrapper",componentId:"sc-1gbqhvv-0"})(["margin:0 auto;margin-bottom:12px;","{margin-bottom:16px;}"],Object(P.j)("tablet")),A=E.default.div.withConfig({displayName:"repostList__ContentWrap",componentId:"sc-1gbqhvv-1"})(["padding:16px 20px;","{width:574px;}","{width:640px;}"],Object(P.j)("tablet"),Object(P.j)("laptop"))},d86I:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("cRdr"),i=function(e){var t=new URLSearchParams(window.location.search),n=Object.fromEntries(t.entries());return r.a(e,n)}},ilHp:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/iframe/repostList",function(){return n("U/ix")}])}},[["ilHp",1,2,4,7,0,3,5,6]]]);
//# sourceMappingURL=repostList-40f0e0a900e2d8aff348.js.map